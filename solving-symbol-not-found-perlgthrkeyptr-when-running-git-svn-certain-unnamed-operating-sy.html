<!DOCTYPE html>
<html lang="en">
<head>
      <title>Solving "Symbol not found: _Perl_Gthr_key_ptr" When Running git-svn on Certain Unnamed Operating System Beta Versions | Undefined Value</title>
    <meta charset="utf-8" />
    <link href="http://undefinedvalue.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Undefined Value Full Atom Feed" />
    <link href="http://undefinedvalue.com/atom.xml" type="application/atom+xml" rel="alternate" title="Undefined Value Atom Feed" />
    <link href="http://undefinedvalue.com/rss.xml" type="application/rss+xml" rel="alternate" title="Undefined Value RSS Feed" />
    <link href="http://undefinedvalue.com/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Undefined Value Categories Atom Feed" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="//fonts.googleapis.com/css?family=Oswald%7CLato%7CInconsolata" rel="stylesheet">
    <link rel="stylesheet" href="http://undefinedvalue.com/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://undefinedvalue.com/theme/css/skeleton.css" />
    <link rel="stylesheet" href="http://undefinedvalue.com/theme/css/highlight.css" />
    <link rel="stylesheet" href="http://undefinedvalue.com/theme/css/style.css" />
    <link rel="icon" type="image/png" href="images/favicon.png" />

    <meta name="tags" content="perl" />
    <meta name="tags" content="osx" />
    <meta name="tags" content="git" />
    <meta name="tags" content="dyld" />
    <meta name="tags" content="bashrc" />
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-43697246-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body id="index" class="home">

  <div class="container">

    <div class="row">
        <div class="logo">
            <a href="http://undefinedvalue.com/">
                <img src="http://undefinedvalue.com/theme/images/undefinedvalue_logo.png" alt="Logo">
            </a>
        </div><!-- /.logo -->
        <header id="banner" class="body">
            <h1><a href="http://undefinedvalue.com/">Undefined Value</a></h1>
            <strong>Kris Johnson's Blog</strong>
        </header><!-- /#banner -->
    </div><!-- /.row -->

    <div class="row">
        <nav id="menu"><ul>
            <li><a href="/">Front Page</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="http://undefinedvalue.com/pages/about-me.html">About Me</a></li>
            <li><a href="http://undefinedvalue.com/pages/kjresume.html">My Résumé</a></li>
          <li><a href="http://undefinedvalue.com/search.html">Search</a></li>
        </ul></nav><!-- /#menu -->
    </div><!-- /.row -->

    <div class="row">

        <div class="nine columns">


<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://undefinedvalue.com/solving-symbol-not-found-perlgthrkeyptr-when-running-git-svn-certain-unnamed-operating-sy.html" rel="bookmark"
         title="Permalink to Solving "Symbol not found: _Perl_Gthr_key_ptr" When Running git-svn on Certain Unnamed Operating System Beta Versions">Solving "Symbol not found: _Perl_Gthr_key_ptr" When Running git-svn on Certain Unnamed Operating System Beta Versions</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2013-08-21T16:32:29-04:00">
      2013-08-21
    </time>
    <ul class="tags">
        <li><a class="tag" href="http://undefinedvalue.com/tag/perl.html">perl</a></li>
        <li><a class="tag" href="http://undefinedvalue.com/tag/osx.html">osx</a></li>
        <li><a class="tag" href="http://undefinedvalue.com/tag/git.html">git</a></li>
        <li><a class="tag" href="http://undefinedvalue.com/tag/dyld.html">dyld</a></li>
        <li><a class="tag" href="http://undefinedvalue.com/tag/bashrc.html">bashrc</a></li>
    </ul>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Let's say that you are using a beta version of a new operating system that you can't name because it is covered by a non-disclosure agreement, and you have also installed the newest version of its development tools, which are also covered by NDA, and when you try to run the <code>git svn</code> command, you get this output:</p>
<div class="highlight"><pre><span></span><span class="n">dyld</span><span class="o">:</span> <span class="n">lazy</span> <span class="n">symbol</span> <span class="n">binding</span> <span class="n">failed</span><span class="o">:</span> <span class="n">Symbol</span> <span class="n">not</span> <span class="n">found</span><span class="o">:</span> <span class="n">_Perl_Gthr_key_ptr</span>
  <span class="n">Referenced</span> <span class="n">from</span><span class="o">:</span> <span class="sr">/usr/../Library/Perl/5.12/darwin-thread-multi-2level/auto/SVN/_Core/</span><span class="n">_Core</span><span class="o">.</span><span class="na">bundle</span>
  <span class="n">Expected</span> <span class="k">in</span><span class="o">:</span> <span class="n">flat</span> <span class="kd">namespace</span>

<span class="n">dyld</span><span class="o">:</span> <span class="n">Symbol</span> <span class="n">not</span> <span class="n">found</span><span class="o">:</span> <span class="n">_Perl_Gthr_key_ptr</span>
  <span class="n">Referenced</span> <span class="n">from</span><span class="o">:</span> <span class="sr">/usr/../Library/Perl/5.12/darwin-thread-multi-2level/auto/SVN/_Core/</span><span class="n">_Core</span><span class="o">.</span><span class="na">bundle</span>
  <span class="n">Expected</span> <span class="k">in</span><span class="o">:</span> <span class="n">flat</span> <span class="kd">namespace</span>

<span class="n">error</span><span class="o">:</span> <span class="n">git</span><span class="o">-</span><span class="n">svn</span> <span class="n">died</span> <span class="n">of</span> <span class="n">signal</span> <span class="mi">5</span>
</pre></div>


<p>Apparently, the problem is that <code>git-svn</code> is implemented in Perl, and there is something wrong with the Perl configuration used when you run <code>/usr/bin/git</code>.</p>
<p>What do you do?</p>
<p>It turns out you can fix this by putting the Git executables provided by the new development tools at the head of your PATH, by executing this command (or adding it to <code>.bashrc</code>):</p>
<div class="highlight"><pre><span></span>export PATH=&quot;/Applications/XXXXX.app/Contents/Developer/usr/libexec/git-core&quot;:$PATH
</pre></div>


<p>where <code>XXXXX.app</code> is the unnamed development tool.</p>
<p>Alternatively, you can add all the command-line tools to your PATH like this:</p>
<div class="highlight"><pre><span></span>export PATH=”/Applications/XXXXX.app/Contents/Developer/usr/bin/”:$PATH
</pre></div>


<p>Credit to <a href="http://vandadnp.wordpress.com/2012/04/06/git-from-command-line-after-installing-xcode-on-os-x-lion/">Vandad Nahavandipoor</a> for the hint.</p>
<p>Another option would be to use the <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html">xcrun</a> utility to run <code>git</code>. You can do this:</p>
<div class="highlight"><pre><span></span>xcrun git svn blah-blah-blah
</pre></div>


<p>or put this into your <code>.bashrc</code> so that you don't have to remember to type <code>xcrun</code>:</p>
<div class="highlight"><pre><span></span>alias git=&#39;xcrun git&#39;
</pre></div>


<p>If you are the kind of person who thinks its a good idea to replace system files with symlinks, you might try symlinking <code>/usr/bin/git</code> to <code>/Applications/XXXXX.app/Contents/Developer/usr/libexec/git-core/git</code>. However, that alone doesn't work, because Git will still run the <code>git-svn</code> executable from its default location, <code>/Library/Developer/CommandLineTools/usr/libexec/git-core</code>, and you will still have the <code>_Perl_Gthr_key_ptr</code> problem. So you also need to symlink the default location to <code>/Applications/XXXXX.app/Contents/Developer/usr/libexec/git-core/</code>, or set the <code>GIT_EXEC_PATH</code> environment variable.</p>
  </div><!-- /.entry-content -->
</section>
<ul>
    <li>Previous article: 
        <a href="http://undefinedvalue.com/customizing-android-action-bar-edit-mode.html">
            Customizing Android Action Bar for Edit Mode
        </a>
    </li>
    <li>Next article:
        <a href="http://undefinedvalue.com/transferring-ringtones-itunes-htc-one.html">
            Transferring Ringtones from iTunes to an HTC One
        </a>
    </li>
</ul>

        </div><!-- /.nine columns -->

        <div class="three columns">
        <section id="extras" class="body">
            <div class="recent">
                <h2>Recent Posts</h2>
                <ul>
                    <li><a href="http://undefinedvalue.com/tscp-translated-to-rust.html">TSCP Translated to Rust</a></li>
                    <li><a href="http://undefinedvalue.com/52.html">52</a></li>
                    <li><a href="http://undefinedvalue.com/coursera-applied-data-science-with-python-specialization-review.html">Review: Coursera's "Applied Data Science with Python" Specialization</a></li>
                    <li><a href="http://undefinedvalue.com/everything-on-the-internet-is-not-directed-at-you.html">Everything on the Internet Is Not Directed at You</a></li>
                    <li><a href="http://undefinedvalue.com/my-white-supremacist-childhood.html">My White-Supremacist Childhood</a></li>
                </ul>
            </div><!-- ./recent -->
            <div class="blogroll">
                    <h2>Other Stuff</h2>
                    <ul>
                        <li><a href="http://secretspacelab.com/tcm.html">What's Good on TCM?</a></li>
                        <li><a href="https://github.com/kristopherjohnson">GitHub</a></li>
                        <li><a href="https://bitbucket.org/KristopherJohnson/">Bitbucket</a></li>
                    </ul>
            </div><!-- /.blogroll -->
            <div class="social">
                    <h2>Follow</h2>
                    <ul>
                        <li><a href="http://undefinedvalue.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom Feed</a></li>

                        <li><a href="http://twitter.com/OldManKris">Twitter</a></li>
                        <li><a href="https://mastodon.xyz/web/accounts/159318">Mastodon</a></li>
                        <li><a href="http://stackoverflow.com/users/1175/kristopher-johnson">Stack Overflow</a></li>
                        <li><a href="https://www.flickr.com/photos/kristopherjohnson/">Flickr</a></li>
                        <li><a href="http://www.linkedin.com/in/kristopherdjohnson">LinkedIn</a></li>
                    </ul>
            </div><!-- /.social -->
        </section><!-- /#extras -->

        </div><!-- /.three columns -->
    </div><!-- /.row -->

    <div class="row">
        <footer id="contentinfo" class="body">
            © 2003-2018 Kristopher Johnson
        </footer><!-- /#contentinfo -->
    </div><!-- /.row -->

  </div><!-- /.container -->

</body>
</html>
