<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>OS X Server Local Websites for Web Developers</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Undefined Value </a></h1>
                <nav><ul>
                    <li><a href="/pages/about-me.html">About Me</a></li>
                    <li class="active"><a href="/category/blog.html">Blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/os-x-server-local-websites-web-developers.html" rel="bookmark"
           title="Permalink to OS X Server Local Websites for Web Developers">OS X Server Local Websites for Web Developers</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-05-25T12:10:59-04:00">
                Published: Sun 25 May 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/kristopher-johnson.html">Kristopher Johnson</a>
        </address>
<p>In <a href="/category/blog.html">Blog</a>.</p>

</footer><!-- /.post-info -->      <p><a href="https://itunes.apple.com/us/app/os-x-server/id714547929">OS X Server</a> is now available free of charge for members of Apple's iOS Developer Program, so I have it installed on most of my machines. Unfortunately, having OS X Server installed complicates the use of the built-in local Apache web server which I use for web development. I've figured out how to make things work the way I like, and I have written this article so that I can find the information again when I need it. Maybe it will help somebody else too.
<!--break--></p>
<h2>Enabling Local Websites</h2>
<p>First, to enable the web server, open the OS X Server app, select <strong>Websites</strong> in the sidebar,  and flip the switch to <strong>On</strong>. You should be able to visit <a href="http://localhost/">http://localhost/</a> in a web browser and see a page titled "Welcome to OS X Server".</p>
<p>While you are on the Websites configuration screen, you may want to enable PHP and Python web applications.</p>
<p>If you have the Xcode service enabled, then instead of "Welcome to OS X Server" you may see the Xcode Bots page. This may be OK with you, but if you would rather not see the Xcode stuff in place of the default website, then in the Server app, go to the <strong>Websites</strong> screen, double-click <strong>Server Website</strong> to edit it, click the <strong>Edit...</strong> button next to <strong>Index Files</strong>, and remove the <code>/xcode</code> entry. Now, visiting <a href="http://localhost/">http://localhost/</a> should take you to the "Welcome to OS X Server" screen, and you can visit <a href="http://localhost/xcode">http://localhost/xcode</a> to see Xcode Bots.</p>
<h2>Website Directories</h2>
<p>Next, you need to know where you can put your website files so that they will be served by the server. By default, the server will look for files in <code>/Library/Server/Web/Data/Sites/Default</code>. You could put your files in that directory, but I prefer to use symlinks so that I can keep all my files in my home directory. So, for example, if your main website file is <code>/Users/kdj/work/mywebapp/index.html</code>, you can symlink it like this:</p>
<div class="highlight"><pre><span></span>ln -s /Users/kdj/work/mywebapp /Library/Server/Web/Data/Sites/Default/mywebapp
</pre></div>


<p>Then if you visit <code>http://localhost/mywebapp</code>, you should see your website.</p>
<h2>Per-user Website Directories</h2>
<p>Alternatively, instead of making modifications to the <code>/Library/Server/Web/Data/Sites</code> directory, you might want to set up per-user websites as are available on OS X when Server is not installed and "Web Sharing" is enabled. To do this, you have to edit the <code>https_server_app.conf</code> configuration file. This file is only writable by root by default, so you will need to use <code>sudo</code>. So, for example, if you use <code>vi</code>, then do this to edit the file:</p>
<div class="highlight"><pre><span></span>sudo vi /Library/Server/Web/Config/apache2/httpd_server_app.conf
</pre></div>


<p>You need to uncomment two lines. First, uncomment the line for <code>apple_userdir_module</code> to enable it:</p>
<div class="highlight"><pre><span></span>#Server-specific modules
# SERVER_INSTALL_PATH_PREFIX should be set as Environment variable in launchd.plist
LoadModule apple_userdir_module <span class="cp">${</span><span class="n">SERVER_INSTALL_PATH_PREFIX</span><span class="cp">}</span>/usr/libexec/apache2/mod_userdir_apple.so
</pre></div>


<p>Then uncomment the line that includes the user configurations:</p>
<div class="highlight"><pre><span></span># User home directories
Include /private/etc/apache2/extra/httpd-userdir.conf
</pre></div>


<p>Then, after stopping and restarting the Websites service, you should be able to access directories under your <code>~/Sites</code> directory. For example, if your user account name is <code>kdj</code>, and you have a website at <code>/Users/kdj/Sites/mywebapp/index.html</code>, then you should be able to visit <a href="http://localhost/~kdj/mywebapp">http://localhost/~kdj/mywebapp</a>.</p>
<h2>MAMP</h2>
<p>If you want to quickly set up an Apache/MySQL/PHP/Perl/Python stack, then check out <a href="http://www.mamp.info/en/">MAMP</a> as an alternative to using the built-in Apache server.</p>
<h2>Credits</h2>
<p>Thanks to Pascal Qyy for providing <a href="http://apple.stackexchange.com/a/59836/1017">an Ask Different answer</a> that was helpful.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>